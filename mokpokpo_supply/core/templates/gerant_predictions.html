<!-- Styles à ajouter dans la balise <style> -->
<style>
    /* --- CSS Navbar Blanche (Pro) --- */
    .navbar-white {
        background-color: #ffffff;
        box-shadow: 0 1px 10px rgba(0,0,0,0.04);
        padding-top: 1rem;
        padding-bottom: 1rem;
    }
    .nav-avatar {
        width: 36px;
        height: 36px;
        background-color: #e8f5e9;
        color: #2e7d32;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        font-weight: bold;
    }
    
    /* --- CSS En-tête Carte Vert (Harmonie) --- */
    .table-header-custom {
        background: linear-gradient(to right, #1B5E20, #2E7D32);
        color: white;
        border-radius: 16px 16px 0 0;
    }
</style>

<!-- --- DÉBUT DU HTML --- -->

<!-- 1. NAVBAR BLANCHE -->
<nav class="navbar navbar-expand-lg navbar-white sticky-top">
    <div class="container">
        <a class="navbar-brand fw-bold text-success" href="#">
            <i class="fas fa-leaf me-2"></i>Agri-Supply
        </a>
        
        <div class="d-flex align-items-center ms-auto">
            <!-- Bouton Retour (Lien Django) -->
            <a href="{% url 'dashboard_gerant' %}" class="btn btn-outline-light text-dark btn-sm rounded-pill border-secondary px-3 me-2">
                <i class="fas fa-arrow-left me-2"></i>Retour
            </a>
            <!-- Bouton Déconnexion (Lien Django) -->
            <a href="{% url 'index' %}" class="btn btn-outline-light text-danger btn-sm rounded-pill border-danger px-3">Déconnexion</a>
            <div class="nav-avatar ms-2">G</div>
        </div>
    </div>
</nav>

<!-- 2. CONTAINER + EN-TÊTE PAGE -->
<div class="container mt-5">
    
    <div class="row align-items-end mb-4">
        <div class="col-md-8">
            <!-- Badge IA -->
            <span class="badge bg-info bg-opacity-10 text-info mb-2 rounded-pill px-3">
                <i class="fas fa-brain me-1"></i> Intelligence Artificielle
            </span>
            <h1 class="fw-bold text-dark mb-0">Prévisions & Prédictions</h1>
        </div>
        <div class="col-md-4 text-md-end mt-3 mt-md-0">
            <p class="text-muted mb-0">Analyse des tendances.</p>
        </div>
    </div>

    <!-- Ligne décorative bleue (Couleur IA) -->
    <div class="bg-info bg-opacity-25 rounded-pill mb-5" style="height: 3px; width: 100%;"></div>

    <!-- 3. CARTE PRÉDICTIONS -->
    <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
        <!-- En-tête Vert -->
        <div class="card-header table-header-custom pt-4 px-4 pb-0">
            <h4 class="fw-bold mb-0 text-white"><i class="fas fa-chart-line me-2"></i>Prévisions de stock et ventes</h4>
        </div>
        
        <div class="card-body p-4">
            <p class="text-muted mb-3">Le modèle IA prédit la demande future et les besoins en stock.</p>
            
            <!-- Logique Django -->
            {% if predictions %}
                <div class="table-responsive">
                    <table class="table table-hover align-middle">
                        <!-- En-tête du tableau Vert -->
                        <thead class="text-white">
                            <tr class="table-success">
                                <th class="text-uppercase fw-bold fs-6 border-0 py-3 ps-3">Produit</th>
                                <th class="text-uppercase fw-bold fs-6 border-0 py-3">Date prévue</th>
                                <th class="text-uppercase fw-bold fs-6 border-0 py-3 pe-3 text-end">Quantité estimée</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for pred in predictions %}
                            <tr>
                                <td class="ps-3 fw-bold text-primary">{{ pred.produit.nom }}</td>
                                <td class="text-muted">{{ pred.date|date:"d M Y" }}</td>
                                <td class="text-end fw-bold text-dark pe-3">{{ pred.quantite_estimee }} kg</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-5 text-muted">
                    <i class="fas fa-robot fa-3x mb-3 opacity-25"></i><br>
                    Aucune prédiction disponible pour l'instant.
                </div>
            {% endif %}
        </div>
    </div>

</div>